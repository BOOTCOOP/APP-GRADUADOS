"use strict";(self["webpackChunkgraduados_app"]=self["webpackChunkgraduados_app"]||[]).push([[806],{6806:(e,t,a)=>{a.r(t),a.d(t,{Camera:()=>i,CameraWeb:()=>o});var n=a(9895),r=a(7439);class o extends n.Uw{async getPhoto(e){return new Promise((async(t,a)=>{if(e.webUseInput||e.source===r.oK.Photos)this.fileInputExperience(e,t,a);else if(e.source===r.oK.Prompt){let n=document.querySelector("pwa-action-sheet");n||(n=document.createElement("pwa-action-sheet"),document.body.appendChild(n)),n.header=e.promptLabelHeader||"Photo",n.cancelable=!1,n.options=[{title:e.promptLabelPhoto||"From Photos"},{title:e.promptLabelPicture||"Take Picture"}],n.addEventListener("onSelection",(async n=>{const r=n.detail;0===r?this.fileInputExperience(e,t,a):this.cameraExperience(e,t,a)}))}else this.cameraExperience(e,t,a)}))}async pickImages(e){return new Promise((async(e,t)=>{this.multipleFileInputExperience(e,t)}))}async cameraExperience(e,t,a){if(customElements.get("pwa-camera-modal")){const i=document.createElement("pwa-camera-modal");i.facingMode=e.direction===r.GW.Front?"user":"environment",document.body.appendChild(i);try{await i.componentOnReady(),i.addEventListener("onPhoto",(async r=>{const o=r.detail;null===o?a(new n.xz("User cancelled photos app")):o instanceof Error?a(o):t(await this._getCameraPhoto(o,e)),i.dismiss(),document.body.removeChild(i)})),i.present()}catch(o){this.fileInputExperience(e,t,a)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),this.fileInputExperience(e,t,a)}fileInputExperience(e,t,a){let o=document.querySelector("#_capacitor-camera-input");const i=()=>{var e;null===(e=o.parentNode)||void 0===e||e.removeChild(o)};o||(o=document.createElement("input"),o.id="_capacitor-camera-input",o.type="file",o.hidden=!0,document.body.appendChild(o),o.addEventListener("change",(a=>{const n=o.files[0];let r="jpeg";if("image/png"===n.type?r="png":"image/gif"===n.type&&(r="gif"),"dataUrl"===e.resultType||"base64"===e.resultType){const a=new FileReader;a.addEventListener("load",(()=>{if("dataUrl"===e.resultType)t({dataUrl:a.result,format:r});else if("base64"===e.resultType){const e=a.result.split(",")[1];t({base64String:e,format:r})}i()})),a.readAsDataURL(n)}else t({webPath:URL.createObjectURL(n),format:r}),i()})),o.addEventListener("cancel",(e=>{a(new n.xz("User cancelled photos app")),i()}))),o.accept="image/*",o.capture=!0,e.source===r.oK.Photos||e.source===r.oK.Prompt?o.removeAttribute("capture"):e.direction===r.GW.Front?o.capture="user":e.direction===r.GW.Rear&&(o.capture="environment"),o.click()}multipleFileInputExperience(e,t){let a=document.querySelector("#_capacitor-camera-input-multiple");const r=()=>{var e;null===(e=a.parentNode)||void 0===e||e.removeChild(a)};a||(a=document.createElement("input"),a.id="_capacitor-camera-input-multiple",a.type="file",a.hidden=!0,a.multiple=!0,document.body.appendChild(a),a.addEventListener("change",(t=>{const n=[];for(let e=0;e<a.files.length;e++){const t=a.files[e];let r="jpeg";"image/png"===t.type?r="png":"image/gif"===t.type&&(r="gif"),n.push({webPath:URL.createObjectURL(t),format:r})}e({photos:n}),r()})),a.addEventListener("cancel",(e=>{t(new n.xz("User cancelled photos app")),r()}))),a.accept="image/*",a.click()}_getCameraPhoto(e,t){return new Promise(((a,n)=>{const r=new FileReader,o=e.type.split("/")[1];"uri"===t.resultType?a({webPath:URL.createObjectURL(e),format:o,saved:!1}):(r.readAsDataURL(e),r.onloadend=()=>{const e=r.result;"dataUrl"===t.resultType?a({dataUrl:e,format:o,saved:!1}):a({base64String:e.split(",")[1],format:o,saved:!1})},r.onerror=e=>{n(e)})}))}async checkPermissions(){if("undefined"===typeof navigator||!navigator.permissions)throw this.unavailable("Permissions API not available in this browser");try{const e=await window.navigator.permissions.query({name:"camera"});return{camera:e.state,photos:"granted"}}catch(e){throw this.unavailable("Camera permissions are not available in this browser")}}async requestPermissions(){throw this.unimplemented("Not implemented on web.")}async pickLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}async getLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}}const i=new o}}]);
//# sourceMappingURL=806.769189d2.js.map