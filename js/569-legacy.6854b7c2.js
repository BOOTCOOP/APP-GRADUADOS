"use strict";(self["webpackChunkgraduados_app"]=self["webpackChunkgraduados_app"]||[]).push([[569],{1817:(e,a,i)=>{var n=i(2109),o=i(9781),t=i(7854),l=i(1702),c=i(2597),s=i(614),r=i(7976),u=i(1340),d=i(7045),v=i(9920),p=t.Symbol,g=p&&p.prototype;if(o&&s(p)&&(!("description"in g)||void 0!==p().description)){var m={},f=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:u(arguments[0]),a=r(g,this)?new p(e):void 0===e?p():p(e);return""===e&&(m[a]=!0),a};v(f,p),f.prototype=g,g.constructor=f;var _="Symbol(test)"==String(p("test")),w=l(g.valueOf),h=l(g.toString),k=/^Symbol\((.*)\)[^)]+$/,b=l("".replace),y=l("".slice);d(g,"description",{configurable:!0,get:function(){var e=w(this);if(c(m,e))return"";var a=h(e),i=_?y(a,7,-1):b(a,k,"$1");return""===i?void 0:i}}),n({global:!0,constructor:!0,forced:!0},{Symbol:f})}},3569:(e,a,i)=>{i.r(a),i.d(a,{default:()=>x});i(4916),i(5306),i(6699),i(7658),i(1817);var n=i(6252),o=i(3577),t=i(2262),l=i(7305),c=i(8903),s=i(2201),r=i(3907);const u={class:"ion-padding"},d={key:0,class:"loading-container"},v={key:1,class:"aviso-detail"},p={class:"aviso-header"},g={key:0,class:"aviso-badge"},m={key:0,class:"file-preview"},f=["src"],_={class:"description-section"},w={class:"contact-section"},h={class:"contact-item"},k={class:"contact-icon"},b={class:"contact-info"},y={class:"contact-item"},C={class:"contact-icon"},D={class:"contact-info"},S={class:"meta-section"},U={class:"date"},A={key:1,class:"action-section"},W={key:2,class:"error-container"},$=(0,n.aZ)({__name:"AvisoDetail",setup(e){const a=(0,s.yj)(),i=(0,s.tv)(),$=(0,r.oR)(),j=(0,n.Fl)((()=>$.state.avisos.currentAviso)),z=(0,n.Fl)((()=>$.state.avisos.loading)),x=(0,n.Fl)((()=>{var e;return(null===(e=$.state.auth)||void 0===e?void 0:e.user)||null})),E=(0,n.Fl)((()=>{var e;return x.value&&(null===(e=j.value)||void 0===e?void 0:e.user_id)===x.value.id}));async function F(){const e=a.params.id;e&&await $.dispatch("avisos/fetchAviso",e)}function q(e){if(!e)return"/assets/img/imagen-no-disponible.jpg";const a="https://api.graduados.kame-code.com/api",i=a.replace(/\/api\/?$/,"")||"https://api.graduados.kame-code.com";let n=e;return n=/^\/?storage\//.test(n)?"/"+n.replace(/^\/+/,""):"/storage/"+n.replace(/^\/+/,""),`${i}${n}`}function I(e){var a;if(!e)return!1;const i=null===(a=e.split(".").pop())||void 0===a?void 0:a.toLowerCase();return["jpg","jpeg","png","gif","webp"].includes(i||"")}function L(e){if(!e)return;const a=q(e);window.open(a,"_blank")}function N(e){if(!e)return"";const a=new Date(e);return a.toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"})}function O(e){e&&window.open(`tel:${e}`,"_system")}function H(e){e&&window.open(`mailto:${e}`,"_system")}async function P(){const e=await l.Cl.create({header:"Confirmar",message:"¿Estás seguro de que deseas cancelar este aviso? Esta acción no se puede deshacer.",buttons:[{text:"Cancelar",role:"cancel"},{text:"Confirmar",role:"confirm",handler:async()=>{if(j.value)try{const e=await $.dispatch("avisos/cancelAviso",j.value.id);e&&i.push("/classifieds")}catch(e){console.error("Error al cancelar aviso:",e)}}}]});await e.present()}function V(){i.push("/classifieds")}return(0,n.bv)((()=>{console.log("AvisoDetail component mounted"),F()})),(e,a)=>{var i;const l=(0,n.up)("ion-icon"),s=(0,n.up)("graduados-app");return(0,n.wg)(),(0,n.j4)(s,{"header-title":(null===(i=j.value)||void 0===i?void 0:i.title)||"Detalle del Aviso","header-show-back-button":!0},{default:(0,n.w5)((()=>[(0,n._)("div",u,[z.value?((0,n.wg)(),(0,n.iD)("div",d,a[4]||(a[4]=[(0,n._)("div",{class:"spinner"},null,-1),(0,n._)("p",null,"Cargando detalle...",-1)]))):j.value?((0,n.wg)(),(0,n.iD)("div",v,[(0,n._)("div",p,[(0,n._)("h1",null,(0,o.zw)(j.value.title),1),E.value?((0,n.wg)(),(0,n.iD)("div",g,"Mi Aviso")):(0,n.kq)("",!0)]),j.value.file?((0,n.wg)(),(0,n.iD)("div",m,[I(j.value.file)?((0,n.wg)(),(0,n.iD)("img",{key:0,src:e.getFileUrl(j.value.file),alt:"Imagen del aviso",class:"aviso-image",onClick:a[0]||(a[0]=e=>L(j.value.file))},null,8,f)):((0,n.wg)(),(0,n.iD)("button",{key:1,class:"document-button",onClick:a[1]||(a[1]=e=>L(j.value.file))},[(0,n.Wm)(l,{icon:(0,t.SU)(c.Pf6)},null,8,["icon"]),a[5]||(a[5]=(0,n.Uk)(" Ver documento adjunto "))]))])):(0,n.kq)("",!0),(0,n._)("div",_,[a[6]||(a[6]=(0,n._)("h2",null,"Descripción",-1)),(0,n._)("p",null,(0,o.zw)(j.value.description),1)]),(0,n._)("div",w,[a[9]||(a[9]=(0,n._)("h2",null,"Información de contacto",-1)),(0,n._)("div",h,[(0,n._)("div",k,[(0,n.Wm)(l,{icon:(0,t.SU)(c.H7N),color:"primary"},null,8,["icon"])]),(0,n._)("div",b,[a[7]||(a[7]=(0,n._)("h3",null,"Teléfono",-1)),(0,n._)("p",null,(0,o.zw)(j.value.contact_phone),1)]),(0,n._)("button",{class:"contact-action",onClick:a[2]||(a[2]=e=>O(j.value.contact_phone))},[(0,n.Wm)(l,{icon:(0,t.SU)(c.H7N)},null,8,["icon"])])]),(0,n._)("div",y,[(0,n._)("div",C,[(0,n.Wm)(l,{icon:(0,t.SU)(c.xOl),color:"primary"},null,8,["icon"])]),(0,n._)("div",D,[a[8]||(a[8]=(0,n._)("h3",null,"Email",-1)),(0,n._)("p",null,(0,o.zw)(j.value.contact_email),1)]),(0,n._)("button",{class:"contact-action",onClick:a[3]||(a[3]=e=>H(j.value.contact_email))},[(0,n.Wm)(l,{icon:(0,t.SU)(c.xOl)},null,8,["icon"])])])]),(0,n._)("div",S,[(0,n._)("p",U,"Publicado: "+(0,o.zw)(N(j.value.created_at)),1)]),E.value?((0,n.wg)(),(0,n.iD)("div",A,[(0,n._)("button",{class:"cancel-button",onClick:P},[(0,n.Wm)(l,{icon:(0,t.SU)(c.gtu)},null,8,["icon"]),a[10]||(a[10]=(0,n.Uk)(" Cancelar Aviso "))])])):(0,n.kq)("",!0)])):((0,n.wg)(),(0,n.iD)("div",W,[(0,n.Wm)(l,{icon:(0,t.SU)(c.nLD),size:"large"},null,8,["icon"]),a[11]||(a[11]=(0,n._)("p",null,"No se pudo cargar el aviso o no existe.",-1)),(0,n._)("button",{class:"back-button",onClick:V},"Volver a la lista")]))])])),_:1},8,["header-title"])}}});var j=i(3744);const z=(0,j.Z)($,[["__scopeId","data-v-7ec6d427"]]),x=z}}]);
//# sourceMappingURL=569-legacy.6854b7c2.js.map