"use strict";(self["webpackChunkgraduados_app"]=self["webpackChunkgraduados_app"]||[]).push([[270],{1817:(e,i,t)=>{var n=t(2109),o=t(9781),a=t(7854),s=t(1702),u=t(2597),r=t(614),l=t(7976),d=t(1340),c=t(7045),p=t(9920),g=a.Symbol,v=g&&g.prototype;if(o&&r(g)&&(!("description"in v)||void 0!==g().description)){var w={},z=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:d(arguments[0]),i=l(v,this)?new g(e):void 0===e?g():g(e);return""===e&&(w[i]=!0),i};p(z,g),z.prototype=v,v.constructor=z;var m="Symbol(test)"==String(g("test")),q=s(v.valueOf),f=s(v.toString),h=/^Symbol\((.*)\)[^)]+$/,y=s("".replace),b=s("".slice);c(v,"description",{configurable:!0,get:function(){var e=q(this);if(u(w,e))return"";var i=f(e),t=m?b(i,7,-1):y(i,h,"$1");return""===t?void 0:t}}),n({global:!0,constructor:!0,forced:!0},{Symbol:z})}},4270:(e,i,t)=>{t.r(i),t.d(i,{default:()=>h});t(1817);var n=t(6252),o=t(3577);const a={key:0},s={key:0},u={class:"question-text"},r={key:0},l={key:1},d={key:1},c={key:1};function p(e,i,t,p,g,v){const w=(0,n.up)("ion-checkbox"),z=(0,n.up)("ion-label"),m=(0,n.up)("ion-item"),q=(0,n.up)("ion-list"),f=(0,n.up)("ion-input"),h=(0,n.up)("ion-button"),y=(0,n.up)("ion-spinner"),b=(0,n.up)("graduados-app");return(0,n.wg)(),(0,n.j4)(b,{"header-title":"Trivia","header-show-back-button":!0,body:"white"},{default:(0,n.w5)((()=>[e.quiz?((0,n.wg)(),(0,n.iD)("div",a,[(0,n._)("h2",null,(0,o.zw)(e.quiz.title),1),(0,n._)("p",null,(0,o.zw)(e.quiz.description),1),e.quiz.questions&&e.quiz.questions.length?((0,n.wg)(),(0,n.iD)("div",s,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.quiz.questions,(i=>((0,n.wg)(),(0,n.iD)("div",{key:i.id,class:"question-block"},[(0,n._)("p",u,(0,o.zw)(i.question),1),"multiple_choice"===i.type?((0,n.wg)(),(0,n.iD)("div",r,[(0,n.Wm)(q,null,{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.options,(t=>((0,n.wg)(),(0,n.j4)(m,{key:t.id,button:"",onClick:n=>e.selectOption(i.id,t.id)},{default:(0,n.w5)((()=>[(0,n.Wm)(w,{slot:"start",checked:e.answers[i.id]===t.id,readonly:""},null,8,["checked"]),(0,n.Wm)(z,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(t.option_text),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:2},1024)])):((0,n.wg)(),(0,n.iD)("div",l,[(0,n.Wm)(f,{modelValue:e.answers[i.id],"onUpdate:modelValue":t=>e.answers[i.id]=t,placeholder:"Tu respuesta"},null,8,["modelValue","onUpdate:modelValue"])]))])))),128)),(0,n.Wm)(h,{expand:"block",onClick:e.submitQuiz},{default:(0,n.w5)((()=>i[0]||(i[0]=[(0,n.Uk)(" Submit Quiz ")]))),_:1},8,["onClick"])])):((0,n.wg)(),(0,n.iD)("div",d,i[1]||(i[1]=[(0,n._)("p",null,"No hay preguntas para este quiz.",-1)])))])):((0,n.wg)(),(0,n.iD)("div",c,[(0,n.Wm)(y,{name:"crescent"}),i[2]||(i[2]=(0,n._)("p",null,"Cargando trivia...",-1))]))])),_:1})}t(8862),t(3948),t(7658);var g=t(2262),v=t(3907),w=t(2201),z=t(7305);const m=(0,n.aZ)({name:"QuizDetail",setup(){const e=(0,v.oR)(),i=(0,w.yj)(),t=(0,w.tv)(),o=i.params.id;(0,n.bv)((()=>{e.dispatch("quizzes/fetchQuiz",o)}));const a=(0,n.Fl)((()=>e.state.quizzes.currentQuiz)),s=(0,g.qj)({});(0,n.YP)(a,(e=>{e&&e.questions&&(e.questions.forEach((e=>{e.id in s||(s[e.id]=null)})),console.log("Quiz actualizado, respuestas inicializadas:",JSON.parse(JSON.stringify(s))))}),{immediate:!0}),(0,n.YP)(s,(e=>{console.log("Respuestas actualizadas:",JSON.parse(JSON.stringify(e)))}),{deep:!0});const u=async e=>{const i=await z.Mn.create({message:e,duration:2e3,position:"bottom"});i.present()},r=(e,i)=>{console.log(`Seleccionado para pregunta ${e}: ${i}`),s[e]=i},l=async()=>{if(console.log("Intentando enviar quiz con respuestas:",JSON.parse(JSON.stringify(s))),!a.value||!a.value.questions)return void await u("No se encontraron preguntas.");{const e=a.value.questions.filter((e=>null===s[e.id]));if(e.length>0)return await u("Por favor, responda todas las preguntas."),void console.log("Preguntas sin responder:",e)}const i={quiz_id:o,answers:Object.entries(s).map((([e,i])=>({question_id:e,quiz_option_id:i})))};try{await e.dispatch("quizzes/submitQuiz",i),await u("Respuestas enviadas correctamente."),t.push({name:"QuizList"})}catch(n){console.error("Error al enviar el quiz:",n),await u("Error al enviar las respuestas.")}};return{quiz:a,answers:s,submitQuiz:l,selectOption:r}}});var q=t(3744);const f=(0,q.Z)(m,[["render",p],["__scopeId","data-v-4c0de833"]]),h=f}}]);
//# sourceMappingURL=270-legacy.595af409.js.map