"use strict";(self["webpackChunkgraduados_app"]=self["webpackChunkgraduados_app"]||[]).push([[189],{1817:(a,e,n)=>{var i=n(2109),o=n(9781),t=n(7854),l=n(1702),c=n(2597),s=n(614),r=n(7976),u=n(1340),d=n(7045),v=n(9920),p=t.Symbol,f=p&&p.prototype;if(o&&s(p)&&(!("description"in f)||void 0!==p().description)){var _={},g=function(){var a=arguments.length<1||void 0===arguments[0]?void 0:u(arguments[0]),e=r(f,this)?new p(a):void 0===a?p():p(a);return""===a&&(_[e]=!0),e};v(g,p),g.prototype=f,f.constructor=g;var m="Symbol(test)"==String(p("test")),w=l(f.valueOf),h=l(f.toString),k=/^Symbol\((.*)\)[^)]+$/,b=l("".replace),y=l("".slice);d(f,"description",{configurable:!0,get:function(){var a=w(this);if(c(_,a))return"";var e=h(a),n=m?y(e,7,-1):b(e,k,"$1");return""===n?void 0:n}}),i({global:!0,constructor:!0,forced:!0},{Symbol:g})}},5189:(a,e,n)=>{n.r(e),n.d(e,{default:()=>x});n(4916),n(5306),n(6699),n(7658),n(1817);var i=n(6252),o=n(3577),t=n(2262),l=n(2201),c=n(3907),s=n(8903),r=n(7305);const u={class:"ion-padding"},d={key:0,class:"loading-container"},v={key:1,class:"aviso-detail"},p={class:"aviso-header"},f={key:0,class:"aviso-badge"},_={key:0,class:"file-preview"},g=["src"],m={class:"description-section"},w={class:"contact-section"},h={class:"contact-item"},k={class:"contact-icon"},b={class:"contact-info"},y={class:"contact-item"},C={class:"contact-icon"},D={class:"contact-info"},S={class:"meta-section"},U={class:"date"},A={key:1,class:"action-section"},W={key:2,class:"error-container"},z=(0,i.aZ)({__name:"AvisoDetail",setup(a){const e=(0,l.yj)(),n=(0,l.tv)(),z=(0,c.oR)(),$=(0,i.Fl)((()=>z.state.avisos.currentAviso)),j=(0,i.Fl)((()=>z.state.avisos.loading)),x=(0,i.Fl)((()=>{var a;return(null===(a=z.state.auth)||void 0===a?void 0:a.user)||null})),E=(0,i.Fl)((()=>{var a;return x.value&&(null===(a=$.value)||void 0===a?void 0:a.user_id)===x.value.id}));async function q(){const a=e.params.id;a&&await z.dispatch("avisos/fetchAviso",a)}function F(a){var e;if(!a)return"";const n=(null===(e="https://api.graduados.kame-code.com/api")||void 0===e?void 0:e.replace("/api",""))||"";return`${n}/storage/${a}`}function I(a){var e;if(!a)return!1;const n=null===(e=a.split(".").pop())||void 0===e?void 0:e.toLowerCase();return["jpg","jpeg","png","gif","webp"].includes(n||"")}function L(a){if(!a)return;const e=F(a);window.open(e,"_blank")}function N(a){if(!a)return"";const e=new Date(a);return e.toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"})}function O(a){a&&window.open(`tel:${a}`,"_system")}function H(a){a&&window.open(`mailto:${a}`,"_system")}async function P(){const a=await r.Cl.create({header:"Confirmar",message:"¿Estás seguro de que deseas cancelar este aviso? Esta acción no se puede deshacer.",buttons:[{text:"Cancelar",role:"cancel"},{text:"Confirmar",role:"confirm",handler:async()=>{if($.value)try{const a=await z.dispatch("avisos/cancelAviso",$.value.id);a&&n.push("/classifieds")}catch(a){console.error("Error al cancelar aviso:",a)}}}]});await a.present()}function V(){n.push("/classifieds")}return(0,i.bv)((()=>{console.log("AvisoDetail component mounted"),q()})),(a,e)=>{var n;const l=(0,i.up)("ion-icon"),c=(0,i.up)("graduados-app");return(0,i.wg)(),(0,i.j4)(c,{"header-title":(null===(n=$.value)||void 0===n?void 0:n.title)||"Detalle del Aviso","header-show-back-button":!0},{default:(0,i.w5)((()=>[(0,i._)("div",u,[j.value?((0,i.wg)(),(0,i.iD)("div",d,e[4]||(e[4]=[(0,i._)("div",{class:"spinner"},null,-1),(0,i._)("p",null,"Cargando detalle...",-1)]))):$.value?((0,i.wg)(),(0,i.iD)("div",v,[(0,i._)("div",p,[(0,i._)("h1",null,(0,o.zw)($.value.title),1),E.value?((0,i.wg)(),(0,i.iD)("div",f,"Mi Aviso")):(0,i.kq)("",!0)]),$.value.file?((0,i.wg)(),(0,i.iD)("div",_,[I($.value.file)?((0,i.wg)(),(0,i.iD)("img",{key:0,src:F($.value.file),alt:"Imagen del aviso",class:"aviso-image",onClick:e[0]||(e[0]=a=>L($.value.file))},null,8,g)):((0,i.wg)(),(0,i.iD)("button",{key:1,class:"document-button",onClick:e[1]||(e[1]=a=>L($.value.file))},[(0,i.Wm)(l,{icon:(0,t.SU)(s.Pf6)},null,8,["icon"]),e[5]||(e[5]=(0,i.Uk)(" Ver documento adjunto "))]))])):(0,i.kq)("",!0),(0,i._)("div",m,[e[6]||(e[6]=(0,i._)("h2",null,"Descripción",-1)),(0,i._)("p",null,(0,o.zw)($.value.description),1)]),(0,i._)("div",w,[e[9]||(e[9]=(0,i._)("h2",null,"Información de contacto",-1)),(0,i._)("div",h,[(0,i._)("div",k,[(0,i.Wm)(l,{icon:(0,t.SU)(s.H7N),color:"primary"},null,8,["icon"])]),(0,i._)("div",b,[e[7]||(e[7]=(0,i._)("h3",null,"Teléfono",-1)),(0,i._)("p",null,(0,o.zw)($.value.contact_phone),1)]),(0,i._)("button",{class:"contact-action",onClick:e[2]||(e[2]=a=>O($.value.contact_phone))},[(0,i.Wm)(l,{icon:(0,t.SU)(s.H7N)},null,8,["icon"])])]),(0,i._)("div",y,[(0,i._)("div",C,[(0,i.Wm)(l,{icon:(0,t.SU)(s.xOl),color:"primary"},null,8,["icon"])]),(0,i._)("div",D,[e[8]||(e[8]=(0,i._)("h3",null,"Email",-1)),(0,i._)("p",null,(0,o.zw)($.value.contact_email),1)]),(0,i._)("button",{class:"contact-action",onClick:e[3]||(e[3]=a=>H($.value.contact_email))},[(0,i.Wm)(l,{icon:(0,t.SU)(s.xOl)},null,8,["icon"])])])]),(0,i._)("div",S,[(0,i._)("p",U,"Publicado: "+(0,o.zw)(N($.value.created_at)),1)]),E.value?((0,i.wg)(),(0,i.iD)("div",A,[(0,i._)("button",{class:"cancel-button",onClick:P},[(0,i.Wm)(l,{icon:(0,t.SU)(s.gtu)},null,8,["icon"]),e[10]||(e[10]=(0,i.Uk)(" Cancelar Aviso "))])])):(0,i.kq)("",!0)])):((0,i.wg)(),(0,i.iD)("div",W,[(0,i.Wm)(l,{icon:(0,t.SU)(s.nLD),size:"large"},null,8,["icon"]),e[11]||(e[11]=(0,i._)("p",null,"No se pudo cargar el aviso o no existe.",-1)),(0,i._)("button",{class:"back-button",onClick:V}," Volver a la lista ")]))])])),_:1},8,["header-title"])}}});var $=n(3744);const j=(0,$.Z)(z,[["__scopeId","data-v-0bf29f26"]]),x=j}}]);
//# sourceMappingURL=189.0ef78397.js.map