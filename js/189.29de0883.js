"use strict";(self["webpackChunkgraduados_app"]=self["webpackChunkgraduados_app"]||[]).push([[189],{1817:(a,n,e)=>{var i=e(2109),o=e(9781),t=e(7854),l=e(1702),c=e(2597),s=e(614),r=e(7976),u=e(1340),d=e(7045),v=e(9920),p=t.Symbol,f=p&&p.prototype;if(o&&s(p)&&(!("description"in f)||void 0!==p().description)){var _={},g=function(){var a=arguments.length<1||void 0===arguments[0]?void 0:u(arguments[0]),n=r(f,this)?new p(a):void 0===a?p():p(a);return""===a&&(_[n]=!0),n};v(g,p),g.prototype=f,f.constructor=g;var m="Symbol(test)"==String(p("test")),w=l(f.valueOf),h=l(f.toString),b=/^Symbol\((.*)\)[^)]+$/,k=l("".replace),y=l("".slice);d(f,"description",{configurable:!0,get:function(){var a=w(this);if(c(_,a))return"";var n=h(a),e=m?y(n,7,-1):k(n,b,"$1");return""===e?void 0:e}}),i({global:!0,constructor:!0,forced:!0},{Symbol:g})}},5189:(a,n,e)=>{e.r(n),e.d(n,{default:()=>x});e(4916),e(5306),e(6699),e(7658),e(1817);var i=e(6252),o=e(3577),t=e(2262),l=e(2201),c=e(3907),s=e(8903),r=e(7305);const u={class:"ion-padding"},d={key:0,class:"loading-container"},v={key:1,class:"aviso-detail"},p={class:"aviso-header"},f={key:0,class:"aviso-badge"},_={key:0,class:"file-preview"},g=["src"],m={class:"description-section"},w={class:"contact-section"},h={class:"contact-item"},b={class:"contact-icon"},k={class:"contact-info"},y={class:"contact-item"},C={class:"contact-icon"},D={class:"contact-info"},S={class:"meta-section"},U={class:"date"},A={key:1,class:"action-section"},W={key:2,class:"error-container"},z=(0,i.aZ)({__name:"AvisoDetail",setup(a){const n=(0,l.yj)(),e=(0,l.tv)(),z=(0,c.oR)(),$=(0,i.Fl)((()=>z.state.avisos.currentAviso)),j=(0,i.Fl)((()=>z.state.avisos.loading)),x=(0,i.Fl)((()=>{var a;return(null===(a=z.state.auth)||void 0===a?void 0:a.user)||null})),E=(0,i.Fl)((()=>{var a;return x.value&&(null===(a=$.value)||void 0===a?void 0:a.user_id)===x.value.id}));async function q(){const a=n.params.id;a&&await z.dispatch("avisos/fetchAviso",a)}function F(a){var n;if(!a)return"";const e=(null===(n="http://localhost:8000/api")||void 0===n?void 0:n.replace("/api",""))||"";return`${e}/storage/${a}`}function I(a){var n;if(!a)return!1;const e=null===(n=a.split(".").pop())||void 0===n?void 0:n.toLowerCase();return["jpg","jpeg","png","gif","webp"].includes(e||"")}function L(a){if(!a)return;const n=F(a);window.open(n,"_blank")}function N(a){if(!a)return"";const n=new Date(a);return n.toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"})}function O(a){a&&window.open(`tel:${a}`,"_system")}function H(a){a&&window.open(`mailto:${a}`,"_system")}async function P(){const a=await r.Cl.create({header:"Confirmar",message:"¿Estás seguro de que deseas cancelar este aviso? Esta acción no se puede deshacer.",buttons:[{text:"Cancelar",role:"cancel"},{text:"Confirmar",role:"confirm",handler:async()=>{if($.value)try{const a=await z.dispatch("avisos/cancelAviso",$.value.id);a&&e.push("/classifieds")}catch(a){console.error("Error al cancelar aviso:",a)}}}]});await a.present()}function V(){e.push("/classifieds")}return(0,i.bv)((()=>{console.log("AvisoDetail component mounted"),q()})),(a,n)=>{var e;const l=(0,i.up)("ion-icon"),c=(0,i.up)("graduados-app");return(0,i.wg)(),(0,i.j4)(c,{"header-title":(null===(e=$.value)||void 0===e?void 0:e.title)||"Detalle del Aviso","header-show-back-button":!0},{default:(0,i.w5)((()=>[(0,i._)("div",u,[j.value?((0,i.wg)(),(0,i.iD)("div",d,n[4]||(n[4]=[(0,i._)("div",{class:"spinner"},null,-1),(0,i._)("p",null,"Cargando detalle...",-1)]))):$.value?((0,i.wg)(),(0,i.iD)("div",v,[(0,i._)("div",p,[(0,i._)("h1",null,(0,o.zw)($.value.title),1),E.value?((0,i.wg)(),(0,i.iD)("div",f,"Mi Aviso")):(0,i.kq)("",!0)]),$.value.file?((0,i.wg)(),(0,i.iD)("div",_,[I($.value.file)?((0,i.wg)(),(0,i.iD)("img",{key:0,src:F($.value.file),alt:"Imagen del aviso",class:"aviso-image",onClick:n[0]||(n[0]=a=>L($.value.file))},null,8,g)):((0,i.wg)(),(0,i.iD)("button",{key:1,class:"document-button",onClick:n[1]||(n[1]=a=>L($.value.file))},[(0,i.Wm)(l,{icon:(0,t.SU)(s.Pf6)},null,8,["icon"]),n[5]||(n[5]=(0,i.Uk)(" Ver documento adjunto "))]))])):(0,i.kq)("",!0),(0,i._)("div",m,[n[6]||(n[6]=(0,i._)("h2",null,"Descripción",-1)),(0,i._)("p",null,(0,o.zw)($.value.description),1)]),(0,i._)("div",w,[n[9]||(n[9]=(0,i._)("h2",null,"Información de contacto",-1)),(0,i._)("div",h,[(0,i._)("div",b,[(0,i.Wm)(l,{icon:(0,t.SU)(s.H7N),color:"primary"},null,8,["icon"])]),(0,i._)("div",k,[n[7]||(n[7]=(0,i._)("h3",null,"Teléfono",-1)),(0,i._)("p",null,(0,o.zw)($.value.contact_phone),1)]),(0,i._)("button",{class:"contact-action",onClick:n[2]||(n[2]=a=>O($.value.contact_phone))},[(0,i.Wm)(l,{icon:(0,t.SU)(s.H7N)},null,8,["icon"])])]),(0,i._)("div",y,[(0,i._)("div",C,[(0,i.Wm)(l,{icon:(0,t.SU)(s.xOl),color:"primary"},null,8,["icon"])]),(0,i._)("div",D,[n[8]||(n[8]=(0,i._)("h3",null,"Email",-1)),(0,i._)("p",null,(0,o.zw)($.value.contact_email),1)]),(0,i._)("button",{class:"contact-action",onClick:n[3]||(n[3]=a=>H($.value.contact_email))},[(0,i.Wm)(l,{icon:(0,t.SU)(s.xOl)},null,8,["icon"])])])]),(0,i._)("div",S,[(0,i._)("p",U,"Publicado: "+(0,o.zw)(N($.value.created_at)),1)]),E.value?((0,i.wg)(),(0,i.iD)("div",A,[(0,i._)("button",{class:"cancel-button",onClick:P},[(0,i.Wm)(l,{icon:(0,t.SU)(s.gtu)},null,8,["icon"]),n[10]||(n[10]=(0,i.Uk)(" Cancelar Aviso "))])])):(0,i.kq)("",!0)])):((0,i.wg)(),(0,i.iD)("div",W,[(0,i.Wm)(l,{icon:(0,t.SU)(s.nLD),size:"large"},null,8,["icon"]),n[11]||(n[11]=(0,i._)("p",null,"No se pudo cargar el aviso o no existe.",-1)),(0,i._)("button",{class:"back-button",onClick:V}," Volver a la lista ")]))])])),_:1},8,["header-title"])}}});var $=e(3744);const j=(0,$.Z)(z,[["__scopeId","data-v-0bf29f26"]]),x=j}}]);
//# sourceMappingURL=189.29de0883.js.map