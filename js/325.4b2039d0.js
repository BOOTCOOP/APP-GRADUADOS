"use strict";(self["webpackChunkgraduados_app"]=self["webpackChunkgraduados_app"]||[]).push([[325],{1817:(i,s,a)=>{var o=a(2109),e=a(9781),t=a(7854),n=a(1702),l=a(2597),c=a(614),r=a(7976),u=a(1340),d=a(7045),v=a(9920),p=t.Symbol,g=p&&p.prototype;if(e&&c(p)&&(!("description"in g)||void 0!==p().description)){var f={},m=function(){var i=arguments.length<1||void 0===arguments[0]?void 0:u(arguments[0]),s=r(g,this)?new p(i):void 0===i?p():p(i);return""===i&&(f[s]=!0),s};v(m,p),m.prototype=g,g.constructor=m;var h="Symbol(test)"==String(p("test")),b=n(g.valueOf),_=n(g.toString),k=/^Symbol\((.*)\)[^)]+$/,w=n("".replace),y=n("".slice);d(g,"description",{configurable:!0,get:function(){var i=b(this);if(l(f,i))return"";var s=_(i),a=h?y(s,7,-1):w(s,k,"$1");return""===a?void 0:a}}),o({global:!0,constructor:!0,forced:!0},{Symbol:m})}},3325:(i,s,a)=>{a.r(s),a.d(s,{default:()=>U});a(7658),a(4916),a(5306),a(1817);var o=a(6252),e=a(2262),t=a(3577),n=a(8903),l=a(2201),c=a(3907);const r={class:"ion-padding"},u={class:"refresh-container"},d={class:"action-container"},v={key:0,class:"loading-container"},p={key:1,class:"avisos-container"},g={key:0,class:"avisos-list"},f=["onClick"],m={class:"aviso-thumbnail"},h=["src"],b={key:1,class:"placeholder-thumbnail"},_={class:"aviso-content"},k={class:"aviso-title"},w={class:"aviso-description"},y={class:"aviso-contact"},D={key:0,class:"aviso-badge"},S={key:1,class:"empty-state"},C=(0,o.aZ)({__name:"Classifieds",setup(i){const s=(0,c.oR)(),a=(0,l.tv)(),C=(0,o.Fl)((()=>s.state.avisos.avisos||[])),z=(0,o.Fl)((()=>s.state.avisos.loading)),A=(0,o.Fl)((()=>{var i;return(null===(i=s.state.auth)||void 0===i?void 0:i.user)||null}));async function U(){try{await s.dispatch("avisos/fetchAvisos"),console.log("Avisos cargados:",C.value)}catch(i){console.error("Error al cargar avisos:",i)}}function $(i){a.push(`/classifieds/${i}`)}function W(){a.push("/classifieds/create")}function P(i){if(!i)return"/assets/img/imagen-no-disponible.jpg";const s="https://api.graduados.kame-code.com/api",a=s.replace(/\/api\/?$/,"")||"https://api.graduados.kame-code.com";let o=i;return o=/^\/?storage\//.test(o)?"/"+o.replace(/^\/+/,""):"/storage/"+o.replace(/^\/+/,""),`${a}${o}`}function F(i,s){return i?i.length>s?i.substring(0,s)+"...":i:""}function j(i){return A.value&&i.user_id===A.value.id}return(0,o.bv)((()=>{console.log("Classifieds component mounted"),U()})),(i,s)=>{const a=(0,o.up)("ion-icon"),l=(0,o.up)("graduados-app");return(0,o.wg)(),(0,o.j4)(l,{"header-title":"Avisos"},{default:(0,o.w5)((()=>[(0,o._)("div",r,[(0,o._)("div",u,[(0,o._)("button",{onClick:U,class:"refresh-button"},[(0,o.Wm)(a,{icon:(0,e.SU)(n.D3P)},null,8,["icon"]),s[0]||(s[0]=(0,o.Uk)(" Actualizar "))])]),(0,o._)("div",d,[(0,o._)("button",{onClick:W,class:"create-button"},[(0,o.Wm)(a,{icon:(0,e.SU)(n.s6O)},null,8,["icon"]),s[1]||(s[1]=(0,o.Uk)(" Publicar Aviso "))])]),z.value?((0,o.wg)(),(0,o.iD)("div",v,s[2]||(s[2]=[(0,o._)("div",{class:"spinner"},null,-1),(0,o._)("p",null,"Cargando avisos...",-1)]))):((0,o.wg)(),(0,o.iD)("div",p,[C.value.length?((0,o.wg)(),(0,o.iD)("div",g,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(C.value,(i=>((0,o.wg)(),(0,o.iD)("div",{key:i.id,onClick:s=>$(i.id),class:"aviso-item"},[(0,o._)("div",m,[i.file?((0,o.wg)(),(0,o.iD)("img",{key:0,src:P(i.file),alt:"Aviso thumbnail"},null,8,h)):((0,o.wg)(),(0,o.iD)("div",b,[(0,o.Wm)(a,{icon:(0,e.SU)(n.Pf6),size:"large"},null,8,["icon"])]))]),(0,o._)("div",_,[(0,o._)("h2",k,(0,t.zw)(i.title),1),(0,o._)("p",w,(0,t.zw)(F(i.description,100)),1),(0,o._)("div",y,[(0,o.Wm)(a,{icon:(0,e.SU)(n.H7N),size:"small"},null,8,["icon"]),(0,o._)("span",null,(0,t.zw)(i.contact_phone),1)])]),j(i)?((0,o.wg)(),(0,o.iD)("div",D,"Mi Aviso")):(0,o.kq)("",!0)],8,f)))),128))])):((0,o.wg)(),(0,o.iD)("div",S,[(0,o.Wm)(a,{icon:(0,e.SU)(n.nLD),size:"large"},null,8,["icon"]),s[3]||(s[3]=(0,o._)("p",null,"No hay avisos publicados en este momento.",-1)),(0,o._)("button",{onClick:W,class:"create-button"}," Publicar mi primer aviso ")]))]))])])),_:1})}}});var z=a(3744);const A=(0,z.Z)(C,[["__scopeId","data-v-04af8270"]]),U=A}}]);
//# sourceMappingURL=325.4b2039d0.js.map